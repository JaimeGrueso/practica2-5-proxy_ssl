{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to MkDocs","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"practica2-5/","title":"Practica 2.5: Proxy Inverso y Balanceo de Carga con SSL en NGINX","text":""},{"location":"practica2-5/#indice","title":"Indice","text":"<ol> <li>Creacion de Certificado Autofirmado</li> <li>Configuraci\u00f3n SSL en el Proxy Inverso</li> <li>Comprobaciones</li> <li>Redirecci\u00f3n Forzosa a HTTPS</li> <li>Cuestiones Finales</li> </ol>"},{"location":"practica2-5/#creacion-de-certificado-autofirmado","title":"Creaci\u00f3n de Certificado Autofirmado","text":"<p>Para esta practica vamos a necesitar un certificado SSL autofirmado. Un certificado autofirmado es un certificado de servidor que es firmado por la propia entidad que lo emite. En lugar de confiar en una entidad de certificaci\u00f3n (CA) de confianza, los certificados autofirmados son firmados por la misma persona que los emite. Por lo tanto, no son confiables y no se pueden verificar autom\u00e1ticamente. </p> <p>En un entorno de producci\u00f3n, siempre debe utilizar un certificado SSL firmado por una CA de confianza. Sin embargo, para fines de desarrollo y pruebas, un certificado autofirmado es una buena opci\u00f3n.</p> <p>Se crear\u00e1 una carpeta en <code>/etc/nginx/ssl</code> donde se almacenar\u00e1n los certificados y las claves asociadas a ellos (privada/p\u00fablica). </p> <p>Veamos pues el proceso para generar los certificados y las claves asociadas a ellos (privada/p\u00fablica). En primer lugar debemos crear el siguiente directorio:</p> <p><code>/etc/nginx/ssl</code></p> <p></p> <p>Una vez creado el directorio, se ejecutar\u00e1 el siguiente comando:</p> <p><code>sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/nginx/ssl/server.key -out /etc/nginx/ssl/server.crt</code></p> <p></p>"},{"location":"practica2-5/#configuracion-ssl-en-el-proxy-inverso","title":"Configuraci\u00f3n SSL en el Proxy Inverso","text":"<p>Hecho esto, se proceder\u00e1 a configurar nuestro proxy-inverso. Para ello se deber\u00e1n de realizar los siguientes pasos: - Editar el archivo de configuraci\u00f3n del proxy-inverso. - Se deber\u00e1 de hacer un unlink de este en la carpeta <code>sites-enabled</code>. - Se deber\u00e1 de agregar la configuraci\u00f3n para que acepte los certificados en el <code>sites-enabled</code>.</p> <p>El archivo de configuraci\u00f3n deber\u00e1 de quedar de la siguiente manera:</p> <p></p> <p>Se ejecutar\u00e1 el siguiente comando para hacer un unlink del archivo de configuraci\u00f3n en la carpeta <code>sites-enabled</code>: </p> <p></p> <p>Se ejecutar\u00e1 el siguiente comando para hacer un link del archivo de configuraci\u00f3n en la carpeta <code>sites-enabled</code>:</p> <p></p>"},{"location":"practica2-5/#comprobaciones","title":"Comprobaciones","text":"<p>Las comprobaciones se deber\u00e1n hacer desde un navegador externo, en el cual accederemos a nuestro ejemplo-proxy.com. Para ello, se deber\u00e1 tener activa  una m\u00e1quina de webserver.</p> <p> Una vez dentro, haremos clic en \"Aceptar el riesgo y continuar\" para proceder con la redirecci\u00f3n. Lo importante es verificar si los certificados est\u00e1n correctamente configurados, para ello, haremos clic en el icono del candado ubicado junto a la barra de direcciones de nuestro navegador.</p> <p></p> <p>A continuaci\u00f3n, veremos la configuraci\u00f3n. Debemos acceder a la secci\u00f3n de ver certificado, donde se mostrar\u00e1 toda la configuraci\u00f3n junto con las claves.</p> <p></p> <p></p> <p>Como se puede observar, el certificado est\u00e1 correctamente configurado y es v\u00e1lido.</p>"},{"location":"practica2-5/#redireccion-forzosa-a-https","title":"Redirecci\u00f3n Forzosa a HTTPS","text":"<p>Para forzar la redirecci\u00f3n a HTTPS, se deber\u00e1 de modificar el archivo de configuraci\u00f3n del proxy-inverso. Se deber\u00e1 de agregar la siguiente configuraci\u00f3n:</p> <p></p> <p>Una vez hecho esto, se deber\u00e1 de reiniciar el servicio de nginx.</p> <p>Para comprobar que la redirecci\u00f3n a HTTPS est\u00e1 funcionando correctamente,  se deber\u00e1 de acceder a nuestro sitio web y verificar que la redirecci\u00f3n  se ha realizado correctamente.</p>"},{"location":"practica2-5/#cuestiones-finales","title":"Cuestiones Finales","text":""},{"location":"practica2-5/#cuestion-1","title":"Cuestion 1","text":"<p>Hemos configurado nuestro proxy inverso con todo lo que nos hace falta pero no nos funciona y da un error  del tipo This site can't provide a secure connection, ERR_SSL_PROTOCOL_ERROR. </p> <p>Para resolver el error ERR_SSL_PROTOCOL_ERROR, se asegurar\u00e1 de que el <code>server_name</code> coincida con el dominio  utilizado para acceder al sitio. Se verificar\u00e1 que el certificado y la clave SSL est\u00e9n en la ubicaci\u00f3n correcta  y tengan los permisos adecuados. Adem\u00e1s de TLS 1.3, se utilizar\u00e1 una lista de cifrados m\u00e1s amplia  como <code>ssl_ciphers HIGH:!aNULL:!MD5</code>, y confirma que el servicio en <code>proxy_pass</code> sea accesible desde NGINX.  Despu\u00e9s de estos ajustes, se reiniciar\u00e1 NGINX y revisa los logs para identificar posibles problemas adicionales.</p>"},{"location":"practica2-5/#cuestion-2","title":"Cuestion 2","text":"<p>Imaginad que intentamos acceder a nuestro sitio web HTTPS y nos encontramos con el siguiente error:</p> <p>El error <code>NET::ERR_CERT_REVOKED</code> significa que el certificado SSL fue revocado y ya no es confiable.  Para solucionarlo, se obtendr\u00e1 un nuevo certificado SSL, configurar el servidor para usarlo y reinicia  el servidor. Luego, verifica que el error se haya solucionado accediendo al sitio.</p>"}]}